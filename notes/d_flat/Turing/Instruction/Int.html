<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Instruction: <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">Int</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">Int</span></code>
</span></title>
  <link href="/schemas/page.css" rel="stylesheet"/>
  <link href="/math-block.css" rel="stylesheet"/>
  <link href="/math-inline.css" rel="stylesheet"/>
  <link href="/mathyml.css" rel="stylesheet"/>
  <link href="/inline-fold.css" rel="stylesheet"/>
  <link crossorigin="true" href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css2?family=Inria+Sans:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@700&display=swap" rel="stylesheet">
  
  <link href="/components/sidebar.css" rel="stylesheet">
  <script>
    setInterval(async () => {
      const res = await fetch('/_reload')
      if (await res.text() === '1') {
        location.reload()
      }
    }, 500)
  </script>
  <link href="/rewrite/code_inline.css" rel="stylesheet">
  <link href="/rewrite/code_block.css" rel="stylesheet">
  
  <link href="https://fred-wang.github.io/MathFonts/NewComputerModern/mathfonts.css" rel="stylesheet">
</head>
<body>

  <header class="header" parent="true">
    <nav class="nav">
      <div class="logo">
        <span onclick="window.location.href='/notes/d_flat/Turing/Instruction'" title="Instruction Specification [/notes/d_flat/Turing/Instruction]">« Instruction Specification</span>
      </div>
    </nav>
  </header>
  <div id="grid-wrapper" sidebar="true">
    <article>
      <section class="block" id="notes/d_flat/Turing/Instruction/Int">
        <details open="">
          <summary>
            <header class="top-header" show-metadata="true">
              <h1>
                Instruction: <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">Int</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">Int</span></code>
</span> 
              </h1>
              <div class="metadata">
                <ul>
                  <li class="meta-item">
                    <span class="link external"><a href="https://github.com/mujiu555" title="https://github.com/mujiu555">GitHub@mujiu555</a></span>
                  </li>
                  <li class="meta-item">
                    2025-12-14 23:46
                  </li>
                  <li class="meta-item">
                    <span class="link local"><a href="https://github.com/mujiu555/Wishful-Thinking/tree/main/site" title="Source [https://github.com/mujiu555/Wishful-Thinking/tree/main/site]">Source</a></span>
                  </li>
                </ul>
              </div>
            </header>
          </summary>
          <p><span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">Int</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">Int</span></code>
</span> instruction is used to invoke interrupt.</p>
  <pre color-scheme="light"><code><span style="color:#5c6a72;">0x
</span><span style="color:#5c6a72;">              20              18              10              08              00
</span><span style="color:#5c6a72;">              |3 3 2 2 2 2 2 2|2 2 2 2 1 1 1 1|1 1 1 1 1 1 0 0|0 0 0 0 0 0 0 0|
</span><span style="color:#5c6a72;">Decimal       |1 0 9 8 7 6 5 4|3 2 1 0 9 8 7 6|5 4 3 2 1 0 9 8|7 6 5 4 3 2 1 0|
</span><span style="color:#5c6a72;">--------------------------------------------------------------------------------
</span><span style="color:#5c6a72;">Register      | register  |                                 | typ | operator  |
</span><span style="color:#5c6a72;">Immediate     | literal                       |             | typ | operator  |
</span><span style="color:#5c6a72;">
</span><span style="color:#5c6a72;">* registers: 6 bits register code
</span><span style="color:#5c6a72;">* literal: literal constant value, either in 16 bits or 8 bits integer.
</span><span style="color:#5c6a72;">* flags: reserved space, for instruction extension use
</span><span style="color:#5c6a72;">* RI and IR are two variant of same instruction, distinguish by instruction type</span></code></pre>
  
  <pre color-scheme="dark"><code><span style="color:#d3c6aa;">0x
</span><span style="color:#d3c6aa;">              20              18              10              08              00
</span><span style="color:#d3c6aa;">              |3 3 2 2 2 2 2 2|2 2 2 2 1 1 1 1|1 1 1 1 1 1 0 0|0 0 0 0 0 0 0 0|
</span><span style="color:#d3c6aa;">Decimal       |1 0 9 8 7 6 5 4|3 2 1 0 9 8 7 6|5 4 3 2 1 0 9 8|7 6 5 4 3 2 1 0|
</span><span style="color:#d3c6aa;">--------------------------------------------------------------------------------
</span><span style="color:#d3c6aa;">Register      | register  |                                 | typ | operator  |
</span><span style="color:#d3c6aa;">Immediate     | literal                       |             | typ | operator  |
</span><span style="color:#d3c6aa;">
</span><span style="color:#d3c6aa;">* registers: 6 bits register code
</span><span style="color:#d3c6aa;">* literal: literal constant value, either in 16 bits or 8 bits integer.
</span><span style="color:#d3c6aa;">* flags: reserved space, for instruction extension use
</span><span style="color:#d3c6aa;">* RI and IR are two variant of same instruction, distinguish by instruction type</span></code></pre>
<p>There are two variant of <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">Int</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">Int</span></code>
</span> instruction:</p>
    <ul>
      <li>
        <p>Register variant:</p>
        <ul>
          <li>Syntax: <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">:int reg</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">:int reg</span></code>
</span></li>
          <li>Description: invoke interrupt with address stored in register <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">reg</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">reg</span></code>
</span></li>
        </ul>
      </li>
      <li>
        <p>Immediate variant:</p>
        <ul>
          <li>Syntax: <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">:int idx</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">:int idx</span></code>
</span></li>
          <li>Description: invoke interrupt with index <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">idx</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">idx</span></code>
</span></li>
        </ul>
      </li>
    </ul>
    <p>No flags used.</p>
    <p>Basically, <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">int</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">int</span></code>
</span> instruction will save current execution status, and jump to interrupt handler function unit. All registers will be pushed into global data stack. The interrupt handler function unit will return to previous execution status by <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">iret</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">iret</span></code>
</span> instruction.</p>
    <p>Apart from 6 bits operator code and 3 bits type code, the rest 17 bits in R case, and rest 7 bits in I case must be 0. Otherwise, invalid instruction exception will be raised automatically.</p>
    <p>The <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">idx</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">idx</span></code>
</span> in immediate variant is a 15 bits unsigned integer. If <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">idx</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">idx</span></code>
</span> larger than <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">0xff</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">0xff</span></code>
</span>, invalid interrupt exception will be raised automatically.</p>
    <p>There are some pre-defined interrupt index:</p>
    <ul>
      <li><span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">0x00</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">0x00</span></code>
</span>: Exception Interrupt</li>
      <li><span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">0x01</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">0x01</span></code>
</span>: System Call Interrupt</li>
      <li><span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">0xff</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">0xff</span></code>
</span>: Halt Interrupt</li>
    </ul>
    <p>For case with register variant, the value in register must be aligned to 4 bytes. With unaligned address will raise invalid interrupt exception automatically. Treat the value in register as address in global data stack segment. And invoke interrupt handler function unit from that address.</p>
 
        </details>
      </section>
      
    


    </article>
    
    <nav id="toc">
        <div class="block">
            <h1>Table of Contents</h1>
            <ul class="block">
            

  <li class="item-summary">
    <a class="bullet">■</a>
    <span class="link"><a href="#notes/d_flat/Turing/Instruction/Int">
<span id="notes/d_flat/Turing/Instruction/Int"></span>
Instruction: <span style="display: inline-block;">

<code color-scheme="light"><span style="color:#5c6a72;">Int</span></code>
<code color-scheme="dark"><span style="color:#d3c6aa;">Int</span></code>
</span></a></span>
    <ul class="block" style="display: block;">
      
    </ul>
  </li>


            </ul>
        </div>
    </nav>
 
  </div>


</body>
</html>